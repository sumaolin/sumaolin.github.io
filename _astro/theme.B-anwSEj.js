let l=[],r=0;const u=4;let c=o=>{let a=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(t){return e.lc=a.push(t),()=>{for(let i=r+u;i<l.length;)l[i]===t?l.splice(i,u):i+=u;let n=a.indexOf(t);~n&&(a.splice(n,1),--e.lc)}},notify(t,n){let i=!l.length;for(let s of a)l.push(s,e.value,t,n);if(i){for(r=0;r<l.length;r+=u)l[r](l[r+1],l[r+2],l[r+3]);l.length=0}},off(){},set(t){let n=e.value;n!==t&&(e.value=t,e.notify(n))},subscribe(t){let n=e.listen(t);return t(e.value),n},value:o};return e};function h(){return typeof localStorage<"u"&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark"?"dark":"light":typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}const f=c(h());function d(){const o=f.get()==="dark"?"light":"dark";f.set(o),localStorage.setItem("theme",o)}export{d as a,f as t};
